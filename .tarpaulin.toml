# Tarpaulin configuration for code coverage
[report]
out = ["Html", "Lcov", "Json"]
output-dir = "./coverage"

[run]
# Increase timeout to 10 minutes (default is 5 minutes)
timeout = "600s"

# Run tests single-threaded to avoid race conditions under instrumentation
implicit-test-threads = true

# Exclude files and directories
exclude-files = [
    "riglr-showcase/*",
    "create-riglr-app/*",
    "target/*",
    "*/benches/*"
]

[coverage]
# Skip specific slow or problematic tests
# Use test name patterns to exclude
skip-tests = [
    "test_macro_compilation",                # Times out under tarpaulin instrumentation
    "*redis*"                                # Skip Redis tests if Redis not available
]

# Additional cargo test arguments
args = ["--", "--skip-ignored"]  # Skip tests marked with #[ignore] for coverage